"use strict";(self.webpackChunkttech_assessment=self.webpackChunkttech_assessment||[]).push([[746],{5746:(Y,v,s)=>{s.r(v),s.d(v,{TopStoriesModule:()=>G});var m=s(9808),d=s(4100),c=s(4004),T=s(1520),h=s(9300),w=s(9468);const y=[{viewValue:"Arts",value:"arts"},{viewValue:"Automobiles",value:"automobiles"},{viewValue:"Books",value:"books"},{viewValue:"Business",value:"business"},{viewValue:"Fashion",value:"fashion"},{viewValue:"Food",value:"food"},{viewValue:"Health",value:"health"},{viewValue:"Home",value:"home"},{viewValue:"Insider",value:"insider"},{viewValue:"Magazine",value:"magazine"},{viewValue:"Movies",value:"movies"},{viewValue:"NY Region",value:"nyregion"},{viewValue:"Obituaries",value:"obituaries"},{viewValue:"Opinion",value:"opinion"},{viewValue:"Politics",value:"politics"},{viewValue:"Realestate",value:"realestate"},{viewValue:"Science",value:"science"},{viewValue:"Sports",value:"sports"},{viewValue:"sundayreview",value:"sundayreview"},{viewValue:"Technology",value:"technology"},{viewValue:"Theater",value:"theater"},{viewValue:"T-magazine",value:"t-magazine"},{viewValue:"Travel",value:"travel"},{viewValue:"Upshot",value:"upshot"},{viewValue:"US",value:"us"},{viewValue:"World",value:"world"}];var a=s(3075),t=s(5e3),l=s(520);const C=new class V{encodeKey(i){return encodeURIComponent(i)}encodeValue(i){return encodeURIComponent(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}};var I=s(764);let U=(()=>{class e{constructor(){this.rootUrl="https://api.nytimes.com/svc/topstories/v2"}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),g=(()=>{class e extends class F{constructor(i,o){this.config=i,this.http=o,this._rootUrl=""}get rootUrl(){return this._rootUrl||this.config.rootUrl}set rootUrl(i){this._rootUrl=i}newParams(){return new l.LE({encoder:C})}}{constructor(o,n){super(o,n)}getSectionJsonResponse(o){let n=this.newParams(),r=new l.WM,B=new l.aW("GET",this.rootUrl+`/${encodeURIComponent(String(o))}.json?api-key=${I.q}`,null,{headers:r,params:n,responseType:"json"});return this.http.request(B).pipe((0,h.h)(p=>p instanceof l.Zn),(0,c.U)(p=>p))}getSectionJson(o){return this.getSectionJsonResponse(o).pipe((0,c.U)(n=>n.body))}}return e.getSectionJsonPath="/{section}.json",e.\u0275fac=function(o){return new(o||e)(t.LFG(U),t.LFG(l.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f=(()=>{class e{constructor(o){this.storiesService=o}getTopStories(o){return this.storiesService.getSectionJsonResponse(o.section).pipe((0,c.U)(n=>n.body.results))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(g))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=s(4831),S=s(7322),L=s(4107),A=s(508),u=s(8777),J=s(2068);const M=["scroller"];function R(e,i){if(1&e&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.viewValue," ")}}function Z(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",9),t._UZ(2,"app-card-item",10),t.qZA(),t.BQk()),2&e){const o=i.$implicit;t.xp6(2),t.Q6J("data",o)}}const O=[{path:"",component:(()=>{class e{constructor(o,n){this.topStoriesLocalService=o,this.ngZone=n,this.pageTitle="Top stories",this.defaultSection={section:"arts"},this.paginatedListItems=[],this.itemsPerpage=5,this.currentIndex=0,this.sectionListSelectionArray=y,this.selectSectionForm=new a.cw({selectSectionField:new a.NI("arts")})}ngOnInit(){this.initData(this.defaultSection),this.selectSectionForm.controls.selectSectionField.valueChanges.subscribe(o=>{this.listItems=[],this.paginatedListItems=[],this.initData({section:o})})}initData(o){this.topStoriesLocalService.getTopStories(o).subscribe(n=>{var r;this.listItems=n,this.paginatedListItems=null===(r=this.listItems)||void 0===r?void 0:r.splice(0,this.itemsPerpage)})}ngAfterViewInit(){this.scroller.elementScrolled().pipe((0,c.U)(()=>this.scroller.measureScrollOffset("bottom")),(0,T.G)(),(0,h.h)(([o,n])=>n<o&&n<140),(0,w.p)(200)).subscribe(()=>{this.ngZone.run(()=>{var o;this.paginatedListItems=[...this.paginatedListItems,...null===(o=this.listItems)||void 0===o?void 0:o.splice(0,this.itemsPerpage)]})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(f),t.Y36(t.R0b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-top-stories-page"]],viewQuery:function(o,n){if(1&o&&t.Gf(M,5),2&o){let r;t.iGM(r=t.CRH())&&(n.scroller=r.first)}},decls:11,vars:4,consts:[[3,"title"],[1,"container"],["appearance","fill",3,"formGroup"],["formControlName","selectSectionField"],[3,"value",4,"ngFor","ngForOf"],["itemSize","100",1,"content"],["scroller",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"value"],[1,"item"],[3,"data"]],template:function(o,n){1&o&&(t._UZ(0,"app-page-header",0),t.TgZ(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Select section"),t.qZA(),t.TgZ(5,"mat-select",3),t.YNc(6,R,2,2,"mat-option",4),t.qZA()(),t.TgZ(7,"cdk-virtual-scroll-viewport",5,6)(9,"div"),t.YNc(10,Z,3,1,"ng-container",7),t.qZA()()()),2&o&&(t.Q6J("title",n.pageTitle),t.xp6(2),t.Q6J("formGroup",n.selectSectionForm),t.xp6(4),t.Q6J("ngForOf",n.sectionListSelectionArray),t.xp6(4),t.Q6J("cdkVirtualForOf",n.paginatedListItems))},directives:[P.q,S.KE,a.JL,a.sg,S.hX,L.gD,a.JJ,a.u,m.sg,A.ey,u.N7,u.xd,u.x0,J.o],styles:[".content[_ngcontent-%COMP%]{height:calc(100vh - 64px);overflow:auto;-ms-overflow-style:none;scrollbar-width:none}.content[_ngcontent-%COMP%]::webkit-scrollbar{display:none}.container[_ngcontent-%COMP%]{padding:20px 0;color:#191616}.item[_ngcontent-%COMP%]{margin-bottom:20px}mat-form-field[_ngcontent-%COMP%]{margin-bottom:10px}"]}),e})()}];let z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(O)],d.Bz]}),e})();var x=s(5601);let G=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[g,f],imports:[[m.ez,z,l.JF,x.m]]}),e})()}}]);